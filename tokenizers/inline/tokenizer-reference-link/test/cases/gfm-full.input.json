{
  "type": "reference-link",
  "description": "A full reference link consists of a link text immediately followed by a link label that matches a link reference definition elsewhere in the document.",
  "cases": [
    {
      "description": "GFM#535 https://github.github.com/gfm/#example-535",
      "content": "[foo][bar]\n\n[bar]: /url \"title\"",
      "expectedHtml": "<p><a href=\"/url\" title=\"title\">foo</a></p>",
      "reason": "Here is a simple example"
    },
    {
      "description": "GFM#536 https://github.github.com/gfm/#example-536",
      "content": "[link [foo [bar]]][ref]\n\n[ref]: /uri",
      "expectedHtml": "<p><a href=\"/uri\">link [foo [bar]]</a></p>",
      "reason": "The link text may contain balanced brackets, but not unbalanced ones, unless they are escaped"
    },
    {
      "description": "GFM#537 https://github.github.com/gfm/#example-537",
      "content": "[link \\[bar][ref]\n\n[ref]: /uri",
      "expectedHtml": "<p><a href=\"/uri\">link [bar</a></p>",
      "reason": "The link text may contain balanced brackets, but not unbalanced ones, unless they are escaped"
    },
    {
      "description": "GFM#547 https://github.github.com/gfm/#example-547",
      "content": "[foo][BaR]\n\n[bar]: /url \"title\"",
      "expectedHtml": "<p><a href=\"/url\" title=\"title\">foo</a></p>",
      "reason": "Matching is case-insensitive"
    },
    {
      "description": "GFM#548 https://github.github.com/gfm/#example-548",
      "content": "[ẞ]\n\n[SS]: /url",
      "expectedHtml": "<p><a href=\"/url\">ẞ</a></p>",
      "reason": "Unicode case fold is used"
    },
    {
      "description": "GFM#549 https://github.github.com/gfm/#example-549",
      "content": "[Foo\n  bar]: /url\n\n[Baz][Foo bar]",
      "expectedHtml": "<p><a href=\"/url\">Baz</a></p>",
      "reason": "Consecutive internal whitespace is treated as one space for purposes of determining matching"
    },
    {
      "description": "GFM#550 https://github.github.com/gfm/#example-550",
      "content": "[foo] [bar]\n\n[bar]: /url \"title\"",
      "expectedHtml": "<p>[foo] <a href=\"/url\" title=\"title\">bar</a></p>",
      "reason": "No whitespace is allowed between the link text and the link label"
    },
    {
      "description": "GFM#551 https://github.github.com/gfm/#example-551",
      "content": "[foo]\n[bar]\n\n[bar]: /url \"title\"",
      "expectedHtml": "<p>[foo]\n<a href=\"/url\" title=\"title\">bar</a></p>",
      "reason": "No whitespace is allowed between the link text and the link label"
    },
    {
      "description": "GFM#552 https://github.github.com/gfm/#example-552",
      "content": "[foo]: /url1\n\n[foo]: /url2\n\n[bar][foo]",
      "expectedHtml": "<p><a href=\"/url1\">bar</a></p>",
      "reason": "When there are multiple matching link reference definitions, the first is used"
    },
    {
      "description": "GFM#553 https://github.github.com/gfm/#example-553",
      "content": "[bar][foo\\!]\n\n[foo!]: /url",
      "expectedHtml": "<p>[bar][foo!]</p>",
      "reason": "Note that matching is performed on normalized strings, not parsed inline content. So the following does not match, even though the labels define equivalent inline content"
    },
    {
      "description": "GFM#554 https://github.github.com/gfm/#example-554",
      "content": "[foo][ref[]\n\n[ref[]: /uri",
      "expectedHtml": "<p>[foo][ref[]</p>\n<p>[ref[]: /uri</p>",
      "reason": "Link labels cannot contain brackets, unless they are backslash-escaped"
    },
    {
      "description": "GFM#555 https://github.github.com/gfm/#example-555",
      "content": "[foo][ref[bar]]\n\n[ref[bar]]: /uri",
      "expectedHtml": "<p>[foo][ref[bar]]</p>\n<p>[ref[bar]]: /uri</p>",
      "reason": "Link labels cannot contain brackets, unless they are backslash-escaped"
    },
    {
      "description": "GFM#556 https://github.github.com/gfm/#example-556",
      "content": "[[[foo]]]\n\n[[[foo]]]: /url",
      "expectedHtml": "<p>[[[foo]]]</p>\n<p>[[[foo]]]: /url</p>",
      "reason": "Link labels cannot contain brackets, unless they are backslash-escaped"
    },
    {
      "description": "GFM#557 https://github.github.com/gfm/#example-557",
      "content": "[foo][ref\\[]\n\n[ref\\[]: /uri",
      "expectedHtml": "<p><a href=\"/uri\">foo</a></p>",
      "reason": "Link labels cannot contain brackets, unless they are backslash-escaped"
    },
    {
      "description": "GFM#558 https://github.github.com/gfm/#example-558",
      "content": "[bar\\\\]: /uri\n\n[bar\\\\]",
      "expectedHtml": "<p><a href=\"/uri\">bar\\</a></p>",
      "reason": "Note that in this example ] is not backslash-escaped"
    },
    {
      "description": "GFM#559 https://github.github.com/gfm/#example-559",
      "content": "[]\n\n[]: /uri",
      "expectedHtml": "<p>[]</p>\n<p>[]: /uri</p>",
      "reason": "A link label must contain at least one non-whitespace character"
    },
    {
      "description": "GFM#560 https://github.github.com/gfm/#example-560",
      "content": "[\n ]\n\n[\n ]: /uri",
      "expectedHtml": "<p>[\n]</p>\n<p>[\n]: /uri</p>",
      "reason": "A link label must contain at least one non-whitespace character"
    }
  ]
}
